function paginate(t,e=1,a=10,s=10){const r=Math.ceil(t/a);let n,p;if(e<1?e=1:e>r&&(e=r),r<=s)n=1,p=r;else{const t=Math.floor(s/2),a=Math.ceil(s/2)-1;e<=t?(n=1,p=s):e+a>=r?(n=r-s+1,p=r):(n=e-t,p=e+a)}const i=(e-1)*a,o=Math.min(i+a-1,t-1),g=Array.from(Array(p+1-n).keys()).map((t=>n+t));return{totalItems:t,currentPage:e,pageSize:a,totalPages:r,startPage:n,endPage:p,startIndex:i,endIndex:o,pages:g}}const t={create(t){!function({createComponent:t,renderer:e,html:a}){t("fc-pagination",{renderer:e,state:()=>({pager:null}),props:{totalItems:{type:Number,required:!0},currentPage:{type:Number},pageSize:{type:Number},maxPages:{type:Number}},setPage(t){this.state.pager=paginate(this.props.totalItems,t,this.props.pageSize,this.props.maxPages),this.emit("change",{instance:this,pager:this.state.pager})},created(){this.state.pager=paginate(this.props.totalItems,this.props.currentPage,this.props.pageSize,this.props.maxPages)},mounted(){this._setupEvents()},updated(){this._setupEvents()},_setupEvents(){Array.from(this.querySelectorAll("button")).forEach((t=>{t.hasAttribute("fc-event-listener")||(t.addEventListener("click",(e=>{e.preventDefault(),e.stopPropagation(),"first"===t.dataset.page&&this.setPage(1),"previous"===t.dataset.page&&this.setPage(this.state.pager.currentPage-1),"next"===t.dataset.page&&this.setPage(this.state.pager.currentPage+1),"last"===t.dataset.page&&this.setPage(this.state.pager.totalPages)})),t.setAttribute("fc-event-listener",""))}))},render(){return a`<div class="fc-pagination"><button type="button" data-page="first" class="fc-pagination__first">First</button> <button type="button" data-page="previous" class="fc-pagination__previous">Previous</button> ${this.state.pager.pages.map((t=>a`<button type="button" data-page="${t}" class="${"fc-pagination__page"+(this.state.pager.currentPage===t?" fc-pagination__page--active":"")}">${t}</button>`))} <button type="button" data-page="next" class="fc-pagination__next">Next</button> <button type="button" data-page="last" class="fc-pagination__last">Last</button></div>`}})}(t)}};export{t as module};
